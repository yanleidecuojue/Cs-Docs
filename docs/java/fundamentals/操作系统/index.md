#### 一.基本特征

##### 1.并发

并发是指宏观上在一段时间内能同时运行多个程序，而并行则指同一时刻能运行多个指令。

并行需要硬件支持，如多流水线、多核处理器或者分布式计算系统

操作系统通过引入进程和线程，使得程序能够并发运行。

##### 2.共享

共享是指系统中的资源可以被多个并发进程共同使用。

有两种共享方式：互斥共享和同时共享。

互斥共享的资源称为临界资源，例如打印机等，在同一时刻只允许一个进程访问，需要用同步机制来实现互斥访问。

##### 3.虚拟

虚拟技术把一个物理实体转换为多个逻辑实体。

主要有两种虚拟技术：时（时间）分复用技术和空（空间）分复用技术。

多个进程能在同一个处理器上并发执行使用了时分复用技术，让每个进程轮流占用处理器，每次只执行一小个时间片并快速切换。

虚拟内存使用了空分复用技术，它将物理内存抽象为地址空间，每个进程都有各自的地址空间。地址空间的页被映射到物理内存，地址空间的页并不需要全部在物理内存中，当使用到一个没有在物理内存的页时，执行页面置换算法，将该页置换到内存中。

##### 4.异步

异步指进程不是一次性执行完毕，而是走走停停，以不可知的速度向前推进。

#### 二.基本功能

##### 1.进程管理

进程控制，进程同步，进程通信，死锁处理，处理机调度等

##### 2.内存管理

内存分配，地址映射，内存保护与共享，虚拟内存等

##### 3.文件管理

文件存储空间的管理，目录管理，文件读写管理和保护等。

##### 4.设备管理

完成用户的I/O请求，方便用户使用各种设备，并提高设备的利用率

主要包括缓冲管理、设备分配、设备处理、虛拟设备等。

#### 三.系统调用

如果一个进程在用户态需要使用内核态的功能，就进行系统调用从而陷入内核，由操作系统代为完成。

![img](https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/tGPV0.png)

Linux系统调用主要有以下这些

| Task     | Commands                    |
| -------- | --------------------------- |
| 进程控制 | fork(); exit(); wait();     |
| 进程通信 | pipe(); shmget(); mmap();   |
| 文件操作 | open(); read(); write();    |
| 设备操作 | ioctl(); read(); write();   |
| 信息维护 | getpid(); alarm(); sleep(); |
| 安全     | chmod(); umask(); chown();  |

#### 四.宏内核与微内核

##### 1. 宏内核

宏内核是将操作系统功能作为一个紧密结合的整体放到内核。

由于各模块共享信息，因此有很高的性能。

##### 2. 微内核

由于操作系统不断复杂，因此将一部分操作系统功能移出内核，从而降低内核的复杂性。移出的部分根据分层的原则划分成若干服务，相互独立。

在微内核结构下，操作系统被划分成小的、定义良好的模块，只有微内核这一个模块运行在内核态，其余模块运行在用户态。

因为需要频繁地在用户态和核心态之间进行切换，所以会有一定的性能损失。

![img](https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/2_14_microkernelArchitecture.jpg)

#### 五.中断

##### 1.外中断

由 CPU 执行指令以外的事件引起，如 I/O 完成中断，表示设备输入/输出处理已经完成，处理器能够发送下一个输入/输出请求。此外还有时钟中断、控制台中断等。

##### 2.异常

由 CPU 执行指令的内部事件引起，如非法操作码、地址越界、算术溢出等。

##### 3.陷入

在用户程序中使用系统调用。

#### 六.操作系统面试题

##### 1.进程与线程

###### 1.1.RR算法

###### 1.2.进程间通信(Inter Process Communication,IPC)

```
1.方式:匿名管道，具名管道，共享内存，消息队列，信号量，套接字，信号
2.进程三态模型：运行，阻塞，就绪
```

###### 1.3.调度算法

```
批处理中的调度
1.先来先服务：FIFS(first in, first serve)
2.最短作业优先：SJF(shortest job first)
3.最短剩余时间优先：SRTN(shortest remaining time next)
交互式系统中的调度
1.轮询调度:round-robin
2.优先级调度:priority scheduling 高优先级会被降低
3.最短进程优先:通过当前测量值进行加权平均得到下一个估计值的技术叫做老化
4.彩票调度:lottery scheduling
5.公平分享调度
```

###### 1.4.页面置换算法

##### 2.死锁

```
互斥(Mutual Exclusion):一次只能有一个进程使用资源，如果另一个进程请求该资源，则必须延迟请求进程，直到释放该资源为止。
保持并等待(Hold and Wait):必须存在一个进程，该进程至少持有一个资源，并且正在等待获取其他进程当前所持有的资源
无抢占(No Preemption):资源不能被抢占，也就是说，在进程完成其任务之后，只能由拥有它的进程自动释放资源
循环等待(Circle Wait):必须存在一组{p0,p1,.....,pn}的等待进程，使p0等待p1持有的资源，p1等待由p2持有的资源，pn-1等待由pn持有的资源，而pn正在等待由p0持有的线程
```





